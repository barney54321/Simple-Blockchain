<!DOCTYPE HTML>
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <title>My Blockchain</title>
    </head>

    <body>
        <h1>My Blockchain Website</h1>

        <div id="create">
            <fieldset>
                <legend><strong>Add New Block</strong></legend>
                <form>
                    From: <input type="text" id="sender" required><br><br>
                    To: <input type="text" id="receiver" required><br><br>
                    Amount: <input type="number" id="amount" required><br><br>
                    <input type="button" id="send" value="Submit">
                </form>
            </fieldset>
        </div>
        <br>

        <div id="chain">
            <fieldset>
                <legend><strong>Current Chain</strong></legend>
                <p id="here"></p>
            </fieldset>
        </div>

        <script>
            
            $(() => {
                $("#send").click(()=>{
                    sendTransaction({
                        sender: $("#sender").val(), 
                        receiver:$("#receiver").val(),
                        amount:$('#amount').val()
                    });
                })
                getBlocks()
            })

            // function addMessages(message){
            //     var string = "<h4>" + message.name + "</h4>" + message.message;
            //     $("#messages").append(string)
            // }

            function getBlocks(){
                $.get("http://localhost:3020/blocks", (data) => {
                    // for (var i = 0; i < data.mes.length; i++) {
                    //     addMessages(data.mes[i]);
                    // }
                })
            }

            function sendTransaction(transaction){
                $.post("http://localhost:3020/blocks", transaction)
            }
        </script>
    </body>
</html>